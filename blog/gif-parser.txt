1:"$Sreact.fragment"
2:I[1478,["545","static/chunks/c16f53c3-7a3995e8957bffd8.js","874","static/chunks/874-fc69dc732f2b9aac.js","970","static/chunks/970-9c869ad3c02bbba2.js","177","static/chunks/app/layout-d14a5074a2686d79.js"],"ThemeProviders"]
3:I[9243,["545","static/chunks/c16f53c3-7a3995e8957bffd8.js","874","static/chunks/874-fc69dc732f2b9aac.js","970","static/chunks/970-9c869ad3c02bbba2.js","177","static/chunks/app/layout-d14a5074a2686d79.js"],""]
4:I[4104,["545","static/chunks/c16f53c3-7a3995e8957bffd8.js","874","static/chunks/874-fc69dc732f2b9aac.js","970","static/chunks/970-9c869ad3c02bbba2.js","177","static/chunks/app/layout-d14a5074a2686d79.js"],"KBarSearchProvider"]
5:I[8471,["545","static/chunks/c16f53c3-7a3995e8957bffd8.js","874","static/chunks/874-fc69dc732f2b9aac.js","970","static/chunks/970-9c869ad3c02bbba2.js","177","static/chunks/app/layout-d14a5074a2686d79.js"],"default"]
6:I[6874,["874","static/chunks/874-fc69dc732f2b9aac.js","63","static/chunks/63-ecf6d2f6b439671d.js","909","static/chunks/app/blog/%5B...slug%5D/page-2808ba9d94fc2d87.js"],""]
7:I[4159,["545","static/chunks/c16f53c3-7a3995e8957bffd8.js","874","static/chunks/874-fc69dc732f2b9aac.js","970","static/chunks/970-9c869ad3c02bbba2.js","177","static/chunks/app/layout-d14a5074a2686d79.js"],"KBarButton"]
8:I[1762,["545","static/chunks/c16f53c3-7a3995e8957bffd8.js","874","static/chunks/874-fc69dc732f2b9aac.js","970","static/chunks/970-9c869ad3c02bbba2.js","177","static/chunks/app/layout-d14a5074a2686d79.js"],"default"]
9:I[7298,["545","static/chunks/c16f53c3-7a3995e8957bffd8.js","874","static/chunks/874-fc69dc732f2b9aac.js","970","static/chunks/970-9c869ad3c02bbba2.js","177","static/chunks/app/layout-d14a5074a2686d79.js"],"default"]
a:I[7555,[],""]
b:I[1295,[],""]
d:I[9665,[],"OutletBoundary"]
10:I[9665,[],"ViewportBoundary"]
12:I[9665,[],"MetadataBoundary"]
14:I[6614,[],""]
:HL["/_next/static/media/7cba1811e3c25a15-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/9be69a079df6f545.css","style"]
:HL["/_next/static/css/8d712ee19175372f.css","style"]
:HL["/_next/static/css/4ca7ca56cd2b9360.css","style"]
:HL["/_next/static/css/7246298b30c42979.css","style"]
0:{"P":null,"b":"C6rA-oO2E4q3CCsOrqGYO","p":"","c":["","blog","gif-parser"],"i":false,"f":[[["",{"children":["blog",{"children":[["slug","gif-parser","c"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/9be69a079df6f545.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/8d712ee19175372f.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"zh-CN","className":"__variable_bc0dcf scroll-smooth","suppressHydrationWarning":true,"children":[["$","link",null,{"rel":"apple-touch-icon","sizes":"76x76","href":"/static/favicons/apple-touch-icon.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"32x32","href":"/static/favicons/favicon-32x32.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"16x16","href":"/static/favicons/favicon-16x16.png"}],["$","link",null,{"rel":"manifest","href":"/static/favicons/site.webmanifest"}],["$","link",null,{"rel":"mask-icon","href":"/static/favicons/safari-pinned-tab.svg","color":"#5bbad5"}],["$","meta",null,{"name":"msapplication-TileColor","content":"#000000"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: light)","content":"#fff"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: dark)","content":"#000"}],["$","link",null,{"rel":"alternate","type":"application/rss+xml","href":"/feed.xml"}],["$","body",null,{"className":"dark:bg-xyz-800 min-h-screen bg-gray-100 text-black antialiased max-md:px-4 dark:text-white","children":[["$","$L2",null,{"children":[["$undefined","$undefined","$undefined",["$","$L3",null,{"async":true,"defer":true,"src":"https://analytics.umami.is/script.js","data-website-id":"af9635f3-0de4-4dd5-8408-4e1bf9e04ace"}],"$undefined","$undefined"],["$","$L4",null,{"kbarConfig":{"searchDocumentsPath":"/search.json"},"children":[["$","div",null,{"id":"header","className":"dark:border-xyz-900 fixed top-0 left-0 z-10 w-full border-b border-violet-100 transition-all duration-200","children":[["$","$L5",null,{}],["$","header",null,{"className":"z-20 mx-auto flex w-full max-w-2xl items-center justify-between px-6 py-4 transition-all duration-200","children":[["$","$L6",null,{"className":"break-words","href":"/","aria-label":"匠心独运","children":["$","div",null,{"className":"flex items-center justify-between","children":[["$","div",null,{"className":"mr-1","children":["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-qr-code","aria-hidden":"true","children":[["$","rect","1tu5fj",{"width":"5","height":"5","x":"3","y":"3","rx":"1"}],["$","rect","1v8r4q",{"width":"5","height":"5","x":"16","y":"3","rx":"1"}],["$","rect","1x03jg",{"width":"5","height":"5","x":"3","y":"16","rx":"1"}],["$","path","177gqh",{"d":"M21 16h-3a2 2 0 0 0-2 2v3"}],["$","path","ents32",{"d":"M21 21v.01"}],["$","path","8crl2c",{"d":"M12 7v3a2 2 0 0 1-2 2H7"}],["$","path","nlz23k",{"d":"M3 12h.01"}],["$","path","n36tog",{"d":"M12 3h.01"}],["$","path","133mhm",{"d":"M12 16v.01"}],["$","path","1slzba",{"d":"M16 12h1"}],["$","path","1lwtk9",{"d":"M21 12v.01"}],["$","path","1880an",{"d":"M12 21v-1"}],"$undefined"]}]}],["$","div",null,{"className":"hidden h-6 items-center text-xl font-semibold text-gray-800 sm:flex dark:text-gray-300","children":"匠心独运"}],["$","sup",null,{"className":"ml-1 text-gray-500","children":"beta"}]]}]}],["$","div",null,{"className":"flex items-center space-x-4 leading-5 sm:-mr-6 sm:space-x-6","children":[["$","div",null,{"className":"no-scrollbar hidden items-center gap-x-4 overflow-x-auto sm:flex md:max-w-72 lg:max-w-96","children":[["$","$L6","博客",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 font-medium text-gray-900 dark:text-gray-100","href":"/blog","children":"博客"}],["$","$L6","标签",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 font-medium text-gray-900 dark:text-gray-100","href":"/tags","children":"标签"}],["$","$L6","项目",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 font-medium text-gray-900 dark:text-gray-100","href":"/projects","children":"项目"}],["$","$L6","关于",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 font-medium text-gray-900 dark:text-gray-100","href":"/about","children":"关于"}]]}],["$","$L7",null,{"aria-label":"Search","children":["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":20,"height":20,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-search","aria-hidden":"true","children":[["$","path","14j7rj",{"d":"m21 21-4.34-4.34"}],["$","circle","4ej97u",{"cx":"11","cy":"11","r":"8"}],"$undefined"]}]}],["$","$L8",null,{}],["$","$L9",null,{}]]}]]}]]}],["$","$La",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lb",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","div",null,{"className":"flex flex-col items-center justify-center space-y-4 py-16","children":[["$","h1",null,{"className":"text-6xl font-extrabold tracking-tight text-gray-900 dark:text-gray-100","children":"404"}],["$","div",null,{"className":"flex max-w-md flex-col items-center","children":[["$","p",null,{"className":"mb-4 text-xl leading-normal font-bold","children":"很抱歉，我们找不到此页面。"}],["$","p",null,{"className":"mb-8","children":"但别担心，你可以在我们的主页上找到很多其他东西。"}],["$","$L6",null,{"className":"focus:shadow-outline-blue inline rounded border border-transparent bg-violet-500 px-4 py-2 text-sm leading-5 font-medium text-white shadow-xs transition-colors duration-150 hover:bg-violet-700 focus:outline-hidden dark:hover:bg-blue-500","href":"/","children":"返回首页"}]]}]]}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]]}],["$","footer",null,{"className":"w-full","children":["$","div",null,{"className":"dark:border-xyz-900/80 mx-auto flex w-full items-center justify-center space-x-4 border-t border-violet-100 py-5","children":["$","div",null,{"className":"flex space-x-2 text-sm text-gray-500 dark:text-gray-400","children":[["$","div",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://wujian.xyz","children":"Simple Card Theme"}]}],["$","div",null,{"children":" • "}],["$","div",null,{"children":["$","$L6",null,{"className":"break-words","href":"/about","children":"N.see"}]}],["$","div",null,{"children":" • "}],["$","div",null,{"children":"© 2025"}],["$","div",null,{"children":" • "}],["$","$L6",null,{"className":"break-words","href":"/","children":"匠心独运"}]]}]}]}]]}],["$","$L3",null,{"id":"show-hm","dangerouslySetInnerHTML":{"__html":"var _hmt = _hmt || [];\n                (function() {\n                var hm = document.createElement(\"script\");\n                hm.src = \"https://hm.baidu.com/hm.js?fd1e70fb69a56d4ad42eca06b04e5ad5\";\n                var s = document.getElementsByTagName(\"script\")[0]; \n                s.parentNode.insertBefore(hm, s);\n                })();\n            "}}]]}]]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$La",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lb",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","gif-parser","c"],["$","$1","c",{"children":[null,["$","$La",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lb",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$Lc","$undefined",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/4ca7ca56cd2b9360.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/7246298b30c42979.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$Ld",null,{"children":["$Le","$Lf",null]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","to9-Hrqs-LVKbdHxmjeKR",{"children":[["$","$L10",null,{"children":"$L11"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],["$","$L12",null,{"children":"$L13"}]]}],false]],"m":"$undefined","G":["$14","$undefined"],"s":false,"S":true}
15:I[1890,["874","static/chunks/874-fc69dc732f2b9aac.js","63","static/chunks/63-ecf6d2f6b439671d.js","909","static/chunks/app/blog/%5B...slug%5D/page-2808ba9d94fc2d87.js"],"default"]
16:I[6433,["874","static/chunks/874-fc69dc732f2b9aac.js","63","static/chunks/63-ecf6d2f6b439671d.js","909","static/chunks/app/blog/%5B...slug%5D/page-2808ba9d94fc2d87.js"],"default"]
17:I[3063,["874","static/chunks/874-fc69dc732f2b9aac.js","63","static/chunks/63-ecf6d2f6b439671d.js","909","static/chunks/app/blog/%5B...slug%5D/page-2808ba9d94fc2d87.js"],"Image"]
18:I[2100,["874","static/chunks/874-fc69dc732f2b9aac.js","63","static/chunks/63-ecf6d2f6b439671d.js","909","static/chunks/app/blog/%5B...slug%5D/page-2808ba9d94fc2d87.js"],"default"]
19:I[1307,["874","static/chunks/874-fc69dc732f2b9aac.js","63","static/chunks/63-ecf6d2f6b439671d.js","909","static/chunks/app/blog/%5B...slug%5D/page-2808ba9d94fc2d87.js"],"default"]
c:["$","div",null,{"className":"min-h-[calc(100vh-64px)] pt-20 pb-6","children":["$","main",null,{"className":"dark:border-xyz-900 dark:bg-xyz-700 relative mx-auto max-w-2xl rounded-2xl border border-violet-200 bg-white shadow-xs","children":[["$","script",null,{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"[gif-parser]带你如何用js读取gif图片数据流，解码gif\",\"datePublished\":\"2021-10-24T00:00:00.000Z\",\"dateModified\":\"2021-10-24T00:00:00.000Z\",\"description\":\"大家好，最近喜欢上文件流，对它很好奇，如psdjs解析.psd文件、xgplayerjs视频解码等，原理都类似，只是这些太复杂，不好下手。最终找到我们今天的主角gif。\",\"image\":\"/static/images/twitter-card.png\",\"url\":\"https://wujian.xyz/blog/gif-parser\",\"author\":[{\"@type\":\"Person\",\"name\":\"n.see\"}]}"}}],["$","div",null,{"className":"fixed top-16 bottom-16 z-0 hidden w-full max-w-6xl -translate-x-60 xl:block","children":[["$","$L15",null,{"menuList":[{"value":"一、前言","url":"#一前言","depth":3},{"value":"二、gif是啥","url":"#二gif是啥","depth":3},{"value":"三、gif文件流结构","url":"#三gif文件流结构","depth":3},{"value":"1、由多种不同类型块组成","url":"#1由多种不同类型块组成","depth":4},{"value":"2、gif解析原理","url":"#2gif解析原理","depth":4},{"value":"四、gif文件流数据块","url":"#四gif文件流数据块","depth":3},{"value":"1、文件头 - Header","url":"#1文件头---header","depth":4},{"value":"2、逻辑屏幕描述符 - LogicalScreenDescriptor","url":"#2逻辑屏幕描述符---logicalscreendescriptor","depth":4},{"value":"3、全局颜色表/局部颜色表 - GlobalColorTable/LocalColorTable","url":"#3全局颜色表局部颜色表---globalcolortablelocalcolortable","depth":4},{"value":"4、图形控制扩展 - GraphicControlExtension","url":"#4图形控制扩展---graphiccontrolextension","depth":4},{"value":"5、应用扩展 - Application Extension","url":"#5应用扩展---application-extension","depth":4},{"value":"6、图像描述符- Image Descriptor","url":"#6图像描述符--image-descriptor","depth":4},{"value":"7、基于表格的图像数据 - Table Based Image Data","url":"#7基于表格的图像数据---table-based-image-data","depth":4},{"value":"8、数据子块 - Data Sub-blocks","url":"#8数据子块---data-sub-blocks","depth":4},{"value":"五、gif-parser关键逻辑实现","url":"#五gif-parser关键逻辑实现","depth":3},{"value":"六、参考资料","url":"#六参考资料","depth":3}]}],["$","$L16",null,{"authorDetails":[{"name":"n.see","avatar":"/static/images/avatar_256.jpg","occupation":"一个有追求的程序员","company":"手机大厂","email":"1144397347@qq.com","juejin":"https://juejin.cn/user/1380642337353991","github":"https://github.com/wujian-xyz","type":"Authors","readingTime":{"text":"1 min read","minutes":0.015,"time":900,"words":3},"slug":"default","path":"authors/default","filePath":"authors/default.mdx","toc":[]}],"filePath":"blog/gif-parser.mdx"}]]}],["$","section",null,{"className":"relative z-2 mx-auto px-9","children":["$","article",null,{"children":["$","div",null,{"className":"dark:divide-xyz-900 divide-y divide-violet-100","children":[["$","header",null,{"className":"py-6","children":["$","div",null,{"className":"space-y-1 text-center","children":[["$","dl",null,{"className":"space-y-10","children":["$","div",null,{"children":[["$","dt",null,{"className":"sr-only","children":"Published on"}],["$","dd",null,{"className":"dark:text-xyz-200 text-base leading-6 font-medium text-gray-500","children":["$","time",null,{"dateTime":"2021-10-24T00:00:00.000Z","children":"2021年10月24日星期日"}]}]]}]}],["$","div",null,{"children":["$","h1",null,{"className":"text-2xl font-extrabold tracking-tight text-gray-900 dark:text-gray-100","children":"[gif-parser]带你如何用js读取gif图片数据流，解码gif"}]}]]}]}],["$","div",null,{"className":"dark:divide-xyz-900 grid-rows-[auto_1fr] divide-y divide-violet-100 pb-8","children":[["$","dl",null,{"className":"py-3 xl:hidden","children":[["$","dt",null,{"className":"sr-only","children":"Authors"}],["$","dd",null,{"children":["$","ul",null,{"className":"flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-y-8 xl:space-x-0","children":[["$","li","n.see",{"className":"flex items-center space-x-2","children":[["$","$L17",null,{"src":"/static/images/avatar_256.jpg","width":32,"height":32,"alt":"头像","className":"size-8 rounded-full object-cover"}],["$","dl",null,{"className":"text-sm leading-5 font-medium whitespace-nowrap","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"className":"text-gray-900 dark:text-gray-100","children":"n.see"}],["$","dt",null,{"className":"sr-only","children":"Twitter"}]]}]]}]]}]}]]}],["$","div",null,{"className":"dark:divide-xyz-900 divide-y divide-violet-100","children":[["$","div",null,{"className":"prose dark:prose-invert max-w-none pt-10 pb-8","children":[["$","h3",null,{"className":"content-header","id":"一前言","children":[["$","a",null,{"className":"break-words","href":"#一前言","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"一、前言"]}],["$","p",null,{"children":["大家好，最近喜欢上文件流，对它很好奇，如",["$","code",null,{"children":"psdjs解析.psd文件"}],"、",["$","code",null,{"children":"xgplayerjs视频解码"}],"等，原理都类似，只是这些太复杂，不好下手。最终找到我们今天的主角",["$","code",null,{"children":"gif"}],"。"]}],["$","h3",null,{"className":"content-header","id":"二gif是啥","children":[["$","a",null,{"className":"break-words","href":"#二gif是啥","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"二、gif是啥"]}],["$","p",null,{"children":[["$","strong",null,{"children":"图像互换格式"}],"（英语：Graphics Interchange Format，简称",["$","strong",null,{"children":"GIF"}],"）是一种位图，以8位色（即256种颜色）重现真彩色的图像。它实际上是一种压缩文档，采用LZW压缩算法进行编码，有效地减少了图像文件在网络上传输的时间。它是目前万维网广泛应用的网络传输图像格式之一。"]}],["$","h3",null,{"className":"content-header","id":"三gif文件流结构","children":[["$","a",null,{"className":"break-words","href":"#三gif文件流结构","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"三、gif文件流结构"]}],["$","h4",null,{"className":"content-header","id":"1由多种不同类型块组成","children":[["$","a",null,{"className":"break-words","href":"#1由多种不同类型块组成","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1、由多种不同类型块组成"]}],["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"未标记块"}],"：文件头、逻辑屏幕描述符、全局颜色表、局部颜色表"]}],["$","li",null,{"children":[["$","strong",null,{"children":"控制块"}],"：图形控制扩展"]}],["$","li",null,{"children":[["$","strong",null,{"children":"图形渲染块"}],"：纯文本扩展、图像描述符"]}],["$","li",null,{"children":[["$","strong",null,{"children":"特殊用途块"}],"：应用扩展、评论扩展、数据流结束标记"]}],["$","li",null,{"children":[["$","strong",null,{"children":"图像数据块"}],"：图像数据"]}]]}],["$","div",null,{"children":["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-01.webp","alt":"gif.png","width":"1512","height":"1681"}]}],["$","h4",null,{"className":"content-header","id":"2gif解析原理","children":[["$","a",null,{"className":"break-words","href":"#2gif解析原理","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2、gif解析原理"]}],["$","ul",null,{"children":["$","li",null,{"children":"解析步骤"}]}],["$","ol",null,{"children":[["$","li",null,{"children":["js读取",["$","code",null,{"children":".gif"}],"图片文件(fetch/ajax/file)"]}],["$","li",null,{"children":["转成",["$","code",null,{"children":"arrayBuffer"}],"数据流"]}],["$","li",null,{"children":["将",["$","code",null,{"children":"arrayBuffer"}],"放到",["$","code",null,{"children":"DataView"}]]}],["$","li",null,{"children":["使用",["$","code",null,{"children":"DataView"}],"底层接口",["$","code",null,{"children":"getInt8/getUit8"}],"读取",["$","code",null,{"children":"十六进制编码"}]]}],["$","li",null,{"children":["$","div",null,{"children":["将",["$","code",null,{"children":"十六进制编码"}],"解成对应的",["$","code",null,{"children":"Unicode编码字符"}],"、",["$","code",null,{"children":"字符串"}],"、",["$","code",null,{"children":"数字"}],"、",["$","code",null,{"children":"颜色值"}]," ",["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-02.webp","alt":"gif-Page-2.drawio.png","width":"762","height":"162"}]]}]}]]}],["$","$L18",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"Parser"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," dataView",["$","span",null,{"className":"token operator","children":":"}]," Uint8Array ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"DataView"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," index",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"constructor"}],["$","span",null,{"className":"token punctuation","children":"("}],"url",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"fetch"}],["$","span",null,{"className":"token punctuation","children":"("}],"url",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"then"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],"response",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"arrayBuffer"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"then"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],"arrayBuffer",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"DataView"}],["$","span",null,{"className":"token punctuation","children":"("}],"arrayBuffer",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"then"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],"dataView",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"dataView ",["$","span",null,{"className":"token operator","children":"="}]," dataView\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"const"}]," str_1 ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// 71"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"const"}]," str_2 ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// 73"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"const"}]," str_3 ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// 70"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"const"}]," str ",["$","span",null,{"className":"token operator","children":"="}]," String",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"fromCharCode"}],["$","span",null,{"className":"token punctuation","children":"("}],"str_1",["$","span",null,{"className":"token punctuation","children":","}]," str_2",["$","span",null,{"className":"token punctuation","children":","}]," str_3",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// GIF"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"// 读取一个无符号8位整数（无符号字节）"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," value ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"dataView",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"getUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"index",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"seek"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," value\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"// 查找索引位置"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"seek"}],["$","span",null,{"className":"token punctuation","children":"("}],"x",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"index ",["$","span",null,{"className":"token operator","children":"+="}]," x\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"Parser"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'/path/xx.gif'"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]]}]}],["$","ul",null,{"children":["$","li",null,{"children":"解码过程："}]}],["$","ol",null,{"children":[["$","li",null,{"children":["顺着",["$","code",null,{"children":"Header"}],"、",["$","code",null,{"children":"LogicalScreenDescrptor"}],"、",["$","code",null,{"children":"GlobalColorTable"}],"（非必要）、",["$","code",null,{"children":"GraphicControlExtension"}]," 、",["$","code",null,{"children":"Application"}],"（非必要）、",["$","code",null,{"children":"CommentExtension"}],"（非必要）、",["$","code",null,{"children":"ImageDescriptor"}],"、",["$","code",null,{"children":"LocalColorTable"}],"（非必要）、",["$","code",null,{"children":"ImageData"}],"、",["$","code",null,{"children":"PlainTextExtension"}],"（非必要）读取,完成第一帧（图片）"]}],["$","li",null,{"children":["接下来重复",["$","code",null,{"children":"GraphicControlExtension"}]," 、",["$","code",null,{"children":"ImageDescriptor"}],"、",["$","code",null,{"children":"ImageData"}],"读取剩下的帧图片数据"]}],["$","li",null,{"children":["直到最后读取",["$","code",null,{"children":"Trailer"}],"gif数据流结束标记，才算完成"]}],["$","li",null,{"children":["$","div",null,{"children":["当然，在读取过程中，每个块都有自己特殊的编码标记，后面代码实现详细介绍 ",["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-03.webp","alt":"gif-Page-1.drawio.png","width":"581","height":"641"}]]}]}]]}],["$","h3",null,{"className":"content-header","id":"四gif文件流数据块","children":[["$","a",null,{"className":"break-words","href":"#四gif文件流数据块","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"四、gif文件流数据块"]}],["$","h4",null,{"className":"content-header","id":"1文件头---header","children":[["$","a",null,{"className":"break-words","href":"#1文件头---header","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1、文件头 - Header"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"描述"}],": 标识在GIF文件头数据流的上下文中，这签名字段标记数据流的开始，版本号字段标识解码器完全需要的能力集处理数据流。 这个块是必需的； 每个数据流只存在一个Header。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"所需版本"}],"：不适用。 该块不受版本号的限制。 此块必须出现在每个数据流的开头。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"句法"}],"："]}]]}],["$","div",null,{"children":["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-04.webp","alt":"gif-Page-Header.drawio.png","width":"581","height":"322"}]}],["$","ol",null,{"start":"4","children":["$","li",null,{"children":[["$","strong",null,{"children":"在gif数据流中查看"}],"：签名、版本信息",["$","blockquote",null,{"children":["$","p",null,{"children":"用十六进制编辑器（Hex Fiend）打开.gif图片文件"}]}]]}]}],["$","div",null,{"children":["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-05.webp","alt":"image.png","width":"1158","height":"306"}]}],["$","p",null,{"children":"如上图编辑器所见："}],["$","ul",null,{"children":[["$","li",null,{"children":["左边选中 ",["$","code",null,{"children":"47"}]," ",["$","code",null,{"children":"49"}]," ",["$","code",null,{"children":"46"}]," ",["$","code",null,{"children":"38"}]," ",["$","code",null,{"children":"39"}]," ",["$","code",null,{"children":"61"}],"，字节编码"]}],["$","li",null,{"children":["右边选中 ",["$","code",null,{"children":"G"}]," ",["$","code",null,{"children":"I"}]," ",["$","code",null,{"children":"F"}]," ",["$","code",null,{"children":"8"}]," ",["$","code",null,{"children":"9"}]," ",["$","code",null,{"children":"a"}],"，Unicode 编码的字符"]}]]}],["$","p",null,{"children":"一一对应，解码原理，如下图所示："}],["$","div",null,{"children":["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-06.webp","alt":"gif-Page-3.drawio.png","width":"521","height":"381"}]}],["$","blockquote",null,{"children":["$","div",null,{"children":["在js对中存储，先加载gif文件，返回arrayBuffter，发现arrayBuffter存储的数据是",["$","code",null,{"children":"十进制"}],"，直接用",["$","code",null,{"children":"String.fromCharCode()"}],"解码，返回 ",["$","code",null,{"children":"Unicode 编码的字符"}]," > ",["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-07.webp","alt":"image.png","width":"804","height":"478"}]]}]}],["$","ol",null,{"start":"5","children":["$","li",null,{"children":[["$","strong",null,{"children":"代码实现"}],"：是不是大家最喜欢还是看代码"]}]}],["$","$L18",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// 文件头 - 部分代码"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"Header"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," signature",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"''"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," version",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"''"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"constructor"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"private"}]," stream",["$","span",null,{"className":"token operator","children":":"}]," Stream",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream ",["$","span",null,{"className":"token operator","children":"="}]," stream\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// 签名，\"GIF\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"signature ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"3"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// 版本，\"89a\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"version ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"3"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"signature ",["$","span",null,{"className":"token operator","children":"!=="}]," ",["$","span",null,{"className":"token string","children":"'GIF'"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"throw"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"Error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Not a GIF file.'"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":[["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/wujian-xyz/gif/blob/main/packages/gif-parser/src/stream.ts","children":"Stream"}],"类是基于DataView的底层接口实现的，详细",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/wujian-xyz/gif/blob/main/packages/gif-parser/src/parses/header.ts","children":"Header"}],"类实现前github查看。"]}]}],["$","h4",null,{"className":"content-header","id":"2逻辑屏幕描述符---logicalscreendescriptor","children":[["$","a",null,{"className":"break-words","href":"#2逻辑屏幕描述符---logicalscreendescriptor","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2、逻辑屏幕描述符 - LogicalScreenDescriptor"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"描述"}],"：逻辑屏幕描述符包含定义将在其中呈现图像的显示设备区域所需的参数。 该块中的坐标是相对于虚拟屏幕的左上角给出的；这个块是必需的； 每个数据流必须存在一个逻辑屏幕描述符。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"该块跟版本无关"}],"：该块必须紧跟在 Header 之后。"]}],["$","li",null,{"children":["$","div",null,{"children":[["$","strong",null,{"children":"句法"}],"： ",["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-08.webp","alt":"gif-Page-LogicalScreenDescriptor.drawio.png","width":"581","height":"562"}]]}]}]]}],["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Logical Screen Width"}],"：",["$","code",null,{"children":"逻辑屏幕的宽度"}],"（以像素为单位），占2字节空间"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Logical Screen Height"}],"：",["$","code",null,{"children":"逻辑屏幕的高度"}],"（以像素为单位），占2字节空间"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Packed Fields"}],"：压缩字段，占1字节空间，里面包含4个值",["$","ol",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Global Color Table Flag"}],"：",["$","code",null,{"children":"全局颜色表标志"}]," 表示存在全局颜色表的标志； 如果设置了标志，全局颜色表将立即跟随逻辑屏幕描述符。 该标志还选择了背景颜色索引的解释； 如果设置了该标志，则背景颜色索引字段的值应用作背景颜色的表索引。 （该字段是字节的最高有效位。）0 - 没有全局颜色表，背景颜色索引字段没有意义。1 - 一个全局颜色表将紧随其后，背景颜色索引字段是有意义的。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Color Resolution"}],"：",["$","code",null,{"children":"颜色分辨率"}]," 颜色的位数减 1, 颜色有1位、8位、16位、32位、等。根据定义，GIF 图像不能超过 256 种颜色或 8 位深度。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Sort Flag"}],"：",["$","code",null,{"children":"排序标志"}]," ",["$","strong",null,{"children":"0"}]," - 未设置。",["$","strong",null,{"children":"1"}]," - 按重要性递减排序，最重要的颜色在前。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Size of Global Color Table"}],": ",["$","code",null,{"children":"全局颜色表的大小"}]," 如果全局颜色表标志设置为 1，则该字段中的值用于计算全局颜色表中包含的字节数。 要确定颜色表的实际大小，请将 2 提高到 [字段值 + 1]。 即使没有指定全局颜色表，也要根据上述公式设置该字段，以便解码器可以选择最佳图形模式来显示流。（该字段由字节的 3个最低有效位组成。）"]}]]}]]}],["$","li",null,{"children":[["$","strong",null,{"children":"Background Color Index"}],": ",["$","code",null,{"children":"背景颜色索引"}],"背景颜色全局颜色表的索引。 背景颜色是用于屏幕上未被图像覆盖的像素的颜色。 如果全局颜色表标志设置为（零），则该字段应为零且应被忽略。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Pixel Aspect Ratio"}],": ",["$","code",null,{"children":"像素纵横比"}]," 用于计算原始图像中像素纵横比的近似值的因子。 如果该字段的值不为 0，则此纵横比的近似值将根据以下公式计算：纵横比 = (像素纵横比 + 15) / 64,像素纵横比定义为像素宽度与其高度的商。 此字段中的值范围允许以 1/64 为增量指定 4:1 的最宽像素到 1:4 的最高像素。 0 - 没有给出纵横比信息。1~255 - 计算中使用的值。"]}]]}],["$","ol",null,{"start":"4","children":["$","li",null,{"children":[["$","strong",null,{"children":"代码实现"}],"：是不是大家最喜欢还是看代码"]}]}],["$","$L18",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// 逻辑屏幕描述符 - 部分代码"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"LogicalScreenDescriptor"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," width",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," height",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"// 填充字段"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," packedFields",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Array"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," globalColorTableFlag",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," colorResolution",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," sortFlag",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," globalColorTableSize",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," backgroundColorIndex",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," pixelAspectRatio",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"constructor"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"private"}]," stream",["$","span",null,{"className":"token operator","children":":"}]," Stream",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream ",["$","span",null,{"className":"token operator","children":"="}]," stream\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"width ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint16"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"height ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint16"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"packedFields ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"byteToBits"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," bits",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Array"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token operator","children":"..."}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"packedFields",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// 1 - 全局颜色表标志"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"globalColorTableFlag ",["$","span",null,{"className":"token operator","children":"="}]," bits",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"shift"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"||"}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// 3 - 颜色分辨率"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"colorResolution ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"bitsToNumber"}],["$","span",null,{"className":"token punctuation","children":"("}],"bits",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"splice"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"3"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token number","children":"1"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// 5 - 排序标志"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"sortFlag ",["$","span",null,{"className":"token operator","children":"="}]," bits",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"shift"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"||"}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// 7 - 全局颜色表的大小"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"globalColorTableSize ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"bitsToNumber"}],["$","span",null,{"className":"token punctuation","children":"("}],"bits",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"splice"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"3"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"handlerPackedField"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"packedFields",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"backgroundColorIndex ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"pixelAspectRatio ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readInt8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"// 后面需要用"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"hasGlobalColorTable"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"boolean"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token operator","children":"!"}],["$","span",null,{"className":"token operator","children":"!"}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"globalColorTableFlag\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"// 后面需要用"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"getGlobalColorTableSize"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"globalColorTableSize\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":["点击前往github查看",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/wujian-xyz/gif/blob/main/packages/gif-parser/src/parses/logicalScreenDescriptor.ts","children":"LogicalScreenDescriptor"}],"类实现细节。"]}]}],["$","h4",null,{"className":"content-header","id":"3全局颜色表局部颜色表---globalcolortablelocalcolortable","children":[["$","a",null,{"className":"break-words","href":"#3全局颜色表局部颜色表---globalcolortablelocalcolortable","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3、全局颜色表/局部颜色表 - GlobalColorTable/LocalColorTable"]}],["$","ol",null,{"children":[["$","li",null,{"children":["$","p",null,{"children":[["$","strong",null,{"children":"描述"}],"： 该块包含一个颜色表，它是代表红-绿-蓝三元组的字节序列。 没有局部颜色表的图像和纯文本扩展使用全局颜色表。 它的存在由逻辑屏幕描述符中的全局颜色表标志设置为 1 来标记； 如果存在，它紧跟逻辑屏幕描述符并包含等于 3 x 2^（全局颜色表的大小+1）的字节数。这个块是可选的； 每个数据流最多可以存在一个全局颜色表。"]}]}],["$","li",null,{"children":["$","p",null,{"children":[["$","strong",null,{"children":"所需版本"}],"：87a"]}]}],["$","li",null,{"children":["$","div",null,{"children":[["$","strong",null,{"children":"句法"}],"： ",["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-09.webp","alt":"gif-Page-GlobalColorTable.drawio.png","width":"581","height":"441"}]]}]}],["$","li",null,{"children":["$","p",null,{"children":[["$","strong",null,{"children":"扩展和范围"}],"： 该块的范围是整个数据流。 该块不能被任何扩展修改。"]}]}],["$","li",null,{"children":["$","p",null,{"children":[["$","strong",null,{"children":"代码实现"}],"：获取全局颜色表的大小s, s + 1, 1 << s + 1"]}]}]]}],["$","$L18",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"ColorTable"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," colors",["$","span",null,{"className":"token operator","children":":"}]," ColorTableData ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"constructor"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"private"}]," stream",["$","span",null,{"className":"token operator","children":":"}]," Stream",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream ",["$","span",null,{"className":"token operator","children":"="}]," stream\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," size ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token operator","children":":"}]," ParseParam",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// 等于 3 x 2^（全局颜色表的大小+1）的字节数。"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," colorTableSize ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token operator","children":"<<"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"size ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"for"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"let"}]," i ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":";"}]," i ",["$","span",null,{"className":"token operator","children":"<"}]," colorTableSize",["$","span",null,{"className":"token punctuation","children":";"}]," i",["$","span",null,{"className":"token operator","children":"++"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"colors",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"push"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8Array"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"3"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","h4",null,{"className":"content-header","id":"4图形控制扩展---graphiccontrolextension","children":[["$","a",null,{"className":"break-words","href":"#4图形控制扩展---graphiccontrolextension","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"4、图形控制扩展 - GraphicControlExtension"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"描述"}],"：图形控制扩展包含处理图形渲染块时使用的参数。 此扩展的范围是要遵循的第一个图形渲染块。 扩展只包含一个数据子块。这个块是可选的； 最多一个图形控制扩展可以在图形渲染块之前。 这是对可能包含在数据流中的图形控制扩展数量的唯一限制。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"所需版本"}],"：89a."]}],["$","li",null,{"children":["$","div",null,{"children":[["$","strong",null,{"children":"句法"}],"： ",["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-10.webp","alt":"gif-Page-GraphicControlExtension.drawio.png","width":"581","height":"602"}]]}]}]]}],["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Extension Introducer"}],": ",["$","code",null,{"children":"扩展导入符"}],"，标识扩展块的开始。该字段包含固定值 ",["$","code",null,{"children":"0x21"}],"。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Graphic Control Label"}],"：",["$","code",null,{"children":"图形控制标签"}],"，将当前块标识为图形控制扩展。该字段包含固定值 ",["$","code",null,{"children":"0xF9"}],"。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Block Size"}],"：",["$","code",null,{"children":"块大小"}],"，块中的字节数，在块大小字段之后，直到但不包括块终止符。该字段包含固定值 ",["$","code",null,{"children":"4"}],"。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Disposal Method"}],"：",["$","code",null,{"children":"处理方法"}],"，表示图形在显示后的处理方式。",["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"0"}]," - ",["$","code",null,{"children":"未指定处置"}],"，解码器不需要采取任何行动。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"1"}]," - ",["$","code",null,{"children":"不要处理"}],"，图形将留在原处。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"2"}]," - ",["$","code",null,{"children":"恢复到背景颜色"}],"，图形使用的区域必须恢复为背景色。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"3"}]," - ",["$","code",null,{"children":"恢复到以前"}],"，解码器需要用渲染图形之前的内容恢复被图形覆盖的区域。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"4-7"}]," - ",["$","code",null,{"children":"待定义"}],"。"]}]]}]]}],["$","li",null,{"children":[["$","strong",null,{"children":"User Input Flag"}],"：",["$","code",null,{"children":"用户输入标志"}]," - 指示在继续之前是否需要用户输入。如果设置了该标志，则在输入用户输入时将继续处理。用户输入的性质由应用程序决定（回车、鼠标按钮点击等）。",["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"0"}]," - 不需要用户输入。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"1"}]," - 需要用户输入。 当使用延迟时间并且设置了用户输入标志时，处理将在接收到用户输入或延迟时间到期时继续进行，以先发生者为准。"]}]]}]]}],["$","li",null,{"children":[["$","strong",null,{"children":"Transparency Flag"}],"：",["$","code",null,{"children":"透明标志"}],"——指示是否在透明索引字段中给出了透明索引。 （该字段是字节的最低有效位。）",["$","ul",null,{"children":[["$","li",null,{"children":"0 - 未给出透明索引。"}],["$","li",null,{"children":"1 - 给出了透明索引。"}]]}]]}],["$","li",null,{"children":[["$","strong",null,{"children":"Delay Time"}],"：",["$","code",null,{"children":"延迟时间"}],"——如果不是 0，该字段指定在继续处理数据流之前等待的百分之一 ",["$","strong",null,{"children":"(1/100)"}]," 秒。渲染图形后，时钟立即开始滴答作响。该字段可以与用户输入标志字段结合使用。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Transparency Index"}],"：",["$","code",null,{"children":"透明度指数"}],"，透明度指数是这样的，当遇到时，显示设备的相应像素不被修改并且处理继续到下一个像素。当且仅当 Transparency Flag 设置为 1 时，索引才存在。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Block Terminator"}],"：",["$","code",null,{"children":"块终止符"}],"——这个零长度的数据块标志着图形控制扩展的结束。"]}]]}],["$","ol",null,{"start":"4","children":[["$","li",null,{"children":[["$","strong",null,{"children":"扩展和范围"}],": 该块的范围是整个数据流。 该块不能被任何扩展修改。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"代码实现"}],":"]}]]}],["$","$L18",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"GraphicsControlExtension"}]," ",["$","span",null,{"className":"token keyword","children":"extends"}]," ",["$","span",null,{"className":"token class-name","children":"BaseExtension"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," introducer",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"''"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," label",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"''"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," blockSize",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," packedFields",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Array"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," reserved",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Array"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," disposalMethod",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," userInputFlag",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," transparentColorFlag",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," delayTime",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," transparentColorIndex",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," blockTerminator",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"''"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"constructor"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"private"}]," stream",["$","span",null,{"className":"token operator","children":":"}]," Stream",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream ",["$","span",null,{"className":"token operator","children":"="}]," stream\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," introducer ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":","}]," label ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token operator","children":":"}]," ParseParam",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"introducer ",["$","span",null,{"className":"token operator","children":"="}]," String",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"fromCharCode"}],["$","span",null,{"className":"token punctuation","children":"("}],"introducer",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"label ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"numberToHex"}],["$","span",null,{"className":"token punctuation","children":"("}],"label",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"blockSize ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"packedFields ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"byteToBits"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," bits ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token operator","children":"..."}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"packedFields",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"reserved ",["$","span",null,{"className":"token operator","children":"="}]," bits",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"splice"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"3"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token comment","children":"// 预留"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"disposalMethod ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"bitsToNumber"}],["$","span",null,{"className":"token punctuation","children":"("}],"bits",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"splice"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"3"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"userInputFlag ",["$","span",null,{"className":"token operator","children":"="}]," bits",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"shift"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"||"}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"transparentColorFlag ",["$","span",null,{"className":"token operator","children":"="}]," bits",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"shift"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"||"}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"delayTime ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint16"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"transparentColorIndex ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"blockTerminator ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":["点击前往github查看",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/wujian-xyz/gif/blob/main/packages/gif-parser/src/parses/graphicsControlExtension.ts","children":"GraphicsControlExtension"}],"类实现细节。"]}]}],["$","ol",null,{"start":"5","children":["$","li",null,{"children":[["$","strong",null,{"children":"建议"}],"："]}]}],["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"User Input Flag"}],"：",["$","code",null,{"children":"处理方法"}],"，恢复到以前的模式旨在用于图形的小部分；这种模式的使用对解码器提出了严格的要求来存储需要保存的图形部分。因此，应谨慎使用此模式。此模式不是为了保存整个图形或图形的大面积；在这种情况下，编码器应尽一切努力使要恢复的图形部分成为数据流中的独立图形。如果解码器无法保存标记为“恢复到上一个​​”的图形区域，建议解码器恢复到背景颜色。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Disposal Method"}],"：",["$","code",null,{"children":"用户输入标志"}],"，当标志被设置时，表明需要用户输入，解码器可以响铃 (0x07) 以提醒用户正在等待输入。在没有指定延迟时间的情况下，解码器应该无限期地等待用户输入。建议编码器不要在没有指定延迟时间的情况下设置用户输入标志。"]}]]}],["$","h4",null,{"className":"content-header","id":"5应用扩展---application-extension","children":[["$","a",null,{"className":"break-words","href":"#5应用扩展---application-extension","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"5、应用扩展 - Application Extension"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"描述"}],"： 应用程序扩展包含特定于应用程序的信息； 它符合扩展块语法，如下所述，其块标签为 0xFF。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"所需版本"}],"：89a."]}],["$","li",null,{"children":[["$","strong",null,{"children":"句法"}],"："]}]]}],["$","div",null,{"children":["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-11.webp","alt":"gif-Page-ApplicationExtension.drawio.png","width":"582","height":"882"}]}],["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Extension Introducer"}],"：",["$","code",null,{"children":"扩展导入符"}],"，将此块定义为扩展。该字段包含固定值 ",["$","code",null,{"children":"0x21"}],"。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Application Extension Label"}],"：",["$","code",null,{"children":"应用扩展标签"}],"——将块标识为应用扩展。该字段包含固定值 ",["$","code",null,{"children":"0xFF"}],"。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Block Size"}],"：",["$","code",null,{"children":"块大小"}],"，此扩展块中的字节数，跟随块大小字段，直到但不包括应用数据的开头。该字段包含固定值 ",["$","code",null,{"children":"11"}],"。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Application Identifier"}],"：",["$","code",null,{"children":"应用程序标识符"}],"，用于识别拥有应用程序扩展的应用程序的八个可打印 ASCII 字符序列。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Application Authentication Code"}],"：",["$","code",null,{"children":"应用验证码"}],"——用于验证应用标识符的三个字节序列。应用程序可以使用算法来计算二进制代码，该代码唯一地将其标识为拥有应用程序扩展的应用程序。"]}]]}],["$","ol",null,{"start":"4","children":[["$","li",null,{"children":[["$","strong",null,{"children":"扩展和范围"}],"：该块没有作用域。 这块不能被任何扩展修改。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"代码实现"}],"："]}]]}],["$","$L18",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"ApplicationExtension"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," introducer",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"''"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," label",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"''"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," blockSize",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," identifier",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"''"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," authenticationCode",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"''"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," appData",["$","span",null,{"className":"token operator","children":":"}]," AppData\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," netscapeExtension",["$","span",null,{"className":"token operator","children":":"}]," NetscapeExtension\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," xmpdataExtension",["$","span",null,{"className":"token operator","children":":"}]," XMPDataExtension\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," unknownApplicationExtension",["$","span",null,{"className":"token operator","children":":"}]," UnknownApplicationExtension\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"constructor"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"private"}]," stream",["$","span",null,{"className":"token operator","children":":"}]," Stream",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"super"}],["$","span",null,{"className":"token punctuation","children":"("}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"netscapeExtension ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"NetscapeExtension"}],["$","span",null,{"className":"token punctuation","children":"("}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"xmpdataExtension ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"XMPDataExtension"}],["$","span",null,{"className":"token punctuation","children":"("}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"unknownApplicationExtension ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"UnknownApplicationExtension"}],["$","span",null,{"className":"token punctuation","children":"("}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"appData ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"as"}]," AppData\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," introducer ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":","}]," label ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token operator","children":":"}]," ParseParam",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"introducer ",["$","span",null,{"className":"token operator","children":"="}]," String",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"fromCharCode"}],["$","span",null,{"className":"token punctuation","children":"("}],"introducer",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"label ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"numberToHex"}],["$","span",null,{"className":"token punctuation","children":"("}],"label",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"blockSize ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readInt8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token comment","children":"// Always 11"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"identifier ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"8"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"authenticationCode ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"3"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"identifier ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token string","children":"'NETSCAPE'"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"netscapeExtension",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," introducer",["$","span",null,{"className":"token punctuation","children":","}]," label ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"appData ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"netscapeExtension",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"export"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"else"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"identifier ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token string","children":"'XMP Data'"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"xmpdataExtension",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," introducer",["$","span",null,{"className":"token punctuation","children":","}]," label ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"appData ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"xmpdataExtension",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"export"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"else"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"unknownApplicationExtension",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," introducer",["$","span",null,{"className":"token punctuation","children":","}]," label ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"appData ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"unknownApplicationExtension",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"export"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":["点击前往github查看",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/wujian-xyz/gif/blob/main/packages/gif-parser/src/parses/applicationExtension.ts","children":"ApplicationExtension"}],"类实现细节。"]}]}],["$","h4",null,{"className":"content-header","id":"6图像描述符--image-descriptor","children":[["$","a",null,{"className":"break-words","href":"#6图像描述符--image-descriptor","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"6、图像描述符- Image Descriptor"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"描述"}],"：数据流中的每个图像都由图像描述符、可选的局部颜色表和图像数据组成。 每个图像必须适合逻辑屏幕的边界，如逻辑屏幕描述符中所定义。图像描述符包含处理基于表格的图像所需的参数。 此块中给出的坐标是指逻辑屏幕内的坐标，以像素为单位。 该块是一个Graphic-Rendering Block，可选地前面有一个或多个控制块，例如",["$","code",null,{"children":"Graphic Control Extension"}],"，后面可以选择跟一个",["$","code",null,{"children":"Local Color Table"}],"； 图像描述符总是跟随着图像数据。图像需要此块。 数据流中的每个图像必须存在一个图像描述符。 每个数据流可以存在无限数量的图像。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"所需版本"}],"：87a."]}],["$","li",null,{"children":[["$","strong",null,{"children":"句法"}],"："]}]]}],["$","div",null,{"children":["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-12.webp","alt":"gif-Page-ImageDescriptor.drawio.png","width":"582","height":"682"}]}],["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Image Separator"}],"：",["$","code",null,{"children":"图像分隔符"}]," - 标识图像描述符的开头。该字段包含固定值 ",["$","code",null,{"children":"0x2C"}],"。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Image Left Position"}],"：",["$","code",null,{"children":"图像左位置"}]," - 图像左边缘相对于逻辑屏幕左边缘的列号（以像素为单位）。逻辑屏幕最左边的列是 ",["$","code",null,{"children":"0"}],"。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Image Top Position"}],"：",["$","code",null,{"children":"图像顶部位置"}],"，图像顶部边缘相对于逻辑屏幕顶部边缘的行数（以像素为单位）。逻辑屏幕的顶行是 ",["$","code",null,{"children":"0"}],"。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Image Width"}],"：",["$","code",null,{"children":"图像宽度"}]," - 以像素为单位。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Image Height"}],"：",["$","code",null,{"children":"图像高度"}]," - 以像素为单位。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Local Color Table Flag"}],"：",["$","code",null,{"children":"局部颜色表标志"}]," ——指示紧跟在该图像描述符之后的局部颜色表的存在。 （该字段是字节的最高有效位。）",["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"0"}]," - 本地颜色表不存在。用全局颜色表（如果可用）。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"1"}]," - 本地颜色表存在，并遵循紧跟在此图像描述符之后。"]}]]}]]}],["$","li",null,{"children":[["$","strong",null,{"children":"Interlace Flag"}],"：",["$","code",null,{"children":"隔行标志"}]," - 指示图像是否是隔行的。图像以四遍交错模式交错。",["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"0"}]," - 图像不隔行扫描。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"1"}]," - 图像交错。"]}]]}]]}],["$","li",null,{"children":[["$","strong",null,{"children":"Sort Flag"}],"：",["$","code",null,{"children":"排序标志"}]," - 指示本地颜色表是否已排序。如果设置了该标志，则按重要性递减的顺序对本地颜色表进行排序。通常，顺序是频率递减，最常见的颜色在前。这有助于具有较少可用颜色的解码器选择最佳颜色子集；解码器可以使用表格的初始段来呈现图形。",["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"0"}]," - 未订购。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"1"}]," - 按重要性递减排序，最重要的颜色在前。"]}]]}]]}],["$","li",null,{"children":[["$","strong",null,{"children":"Size of Local Color Table"}],"：",["$","code",null,{"children":"局部颜色表的大小"}]," - 如果局部颜色表标志设置为",["$","code",null,{"children":"1"}],"，则该字段中的值用于计算局部颜色表中包含的字节数。要确定颜色表的实际大小，请将 ",["$","code",null,{"children":"2"}]," 提高到该字段的值 ",["$","code",null,{"children":"+ 1"}],"。如果未指定本地颜色表，则该值应为 ",["$","code",null,{"children":"0"}],"。 （该字段由字节的 ",["$","code",null,{"children":"3 个"}],"最低有效位组成。）"]}]]}],["$","ol",null,{"start":"5","children":[["$","li",null,{"children":[["$","strong",null,{"children":"扩展和范围"}],"：该块的范围是它后面的基于表的图像数据块。这个块可以被Graphic修改"]}],["$","li",null,{"children":[["$","strong",null,{"children":"代码实现"}],"："]}]]}],["$","$L18",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"ImageDescriptor"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," introducer",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"''"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," left",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," top",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," width",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," height",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," packedFields",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Array"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," localColorTableFlag",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," interlaceFlag",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," sortFlag",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," reserved",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Array"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," localColorTableSize",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"constructor"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"private"}]," stream",["$","span",null,{"className":"token operator","children":":"}]," Stream",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream ",["$","span",null,{"className":"token operator","children":"="}]," stream\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"hasLocalColorTable"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"boolean"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token operator","children":"!"}],["$","span",null,{"className":"token operator","children":"!"}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"localColorTableFlag\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"getLocalColorTableSize"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"localColorTableSize\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," introducer ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token operator","children":":"}]," ParseParam",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"introducer ",["$","span",null,{"className":"token operator","children":"="}]," String",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"fromCharCode"}],["$","span",null,{"className":"token punctuation","children":"("}],"introducer",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"left ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint16"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"top ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint16"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"width ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint16"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"height ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint16"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"packedFields ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"byteToBits"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," bits ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token operator","children":"..."}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"packedFields",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"localColorTableFlag ",["$","span",null,{"className":"token operator","children":"="}]," bits",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"shift"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"||"}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"interlaceFlag ",["$","span",null,{"className":"token operator","children":"="}]," bits",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"shift"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"||"}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"sortFlag ",["$","span",null,{"className":"token operator","children":"="}]," bits",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"shift"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"||"}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"reserved ",["$","span",null,{"className":"token operator","children":"="}]," bits",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"splice"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"2"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"localColorTableSize ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"bitsToNumber"}],["$","span",null,{"className":"token punctuation","children":"("}],"bits",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"splice"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"3"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":["点击前往github查看",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/wujian-xyz/gif/blob/main/packages/gif-parser/src/parses/imageDescriptor.ts","children":"ImageDescriptor"}],"类实现细节。"]}]}],["$","h4",null,{"className":"content-header","id":"7基于表格的图像数据---table-based-image-data","children":[["$","a",null,{"className":"break-words","href":"#7基于表格的图像数据---table-based-image-data","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"7、基于表格的图像数据 - Table Based Image Data"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"描述"}],"：基于表的图像的图像数据由一系列子块组成，每个子块的大小最多为 255 字节，包含对图像中每个像素的活动颜色表的索引。 像素索引按从左到右和从上到下的顺序排列。 每个索引必须在活动颜色表的大小范围内，从 0 开始。 索引序列使用具有可变长度代码的 ",["$","code",null,{"children":"LZW"}]," 算法进行编码，如附录 F 中所述"]}],["$","li",null,{"children":[["$","strong",null,{"children":"所需版本"}],"：87a."]}],["$","li",null,{"children":[["$","strong",null,{"children":"句法"}],"：图像数据格式如下"]}]]}],["$","div",null,{"children":["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-13.webp","alt":"gif-Page-ImageData.drawio.png","width":"581","height":"321"}]}],["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"LZW Minimum Code Size"}],"：",["$","code",null,{"children":"LZW 最小代码大小"}]," - 该字节确定用于图像数据中 ",["$","code",null,{"children":"LZW"}]," 代码的初始位数，如附录 F 中所述。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Image Data"}],"：图片数据 - 看下面 ",["$","code",null,{"children":"Data Sub-blocks"}]," 规则。"]}]]}],["$","ol",null,{"start":"4","children":["$","li",null,{"children":[["$","strong",null,{"children":"代码实现"}],"："]}]}],["$","$L18",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"ImageData"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"private"}]," lzwMinimumCodeSize",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"private"}]," blocks",["$","span",null,{"className":"token operator","children":":"}]," blocks",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Array"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            offset",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["            length",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"constructor"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"private"}]," stream",["$","span",null,{"className":"token operator","children":":"}]," Stream",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"private"}]," subBlocks",["$","span",null,{"className":"token operator","children":":"}]," SubBlocks",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream ",["$","span",null,{"className":"token operator","children":"="}]," stream",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"subBlocks ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"subBlocks"}],["$","span",null,{"className":"token punctuation","children":"("}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"lzwMinimumCodeSize ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// 看 -> 8、数据子块 - Data Sub-blocks，也就是 LZW 数据"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"subBlocks",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"blocks ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"subBlocks",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readSubBlocks"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":["点击前往github查看",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/wujian-xyz/gif/blob/main/packages/gif-parser/src/parses/imageData.ts","children":"ImageData"}],"类实现细节。"]}]}],["$","ol",null,{"start":"5","children":[["$","li",null,{"children":[["$","strong",null,{"children":"扩展和范围"}],"：该块没有范围，它包含栅格数据。 用于修改基于表格的图像的扩展必须出现在相应的图像描述符之前。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"如附录 F 中所述"}],"：这是",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"http://www.w3.org/Graphics/GIF/spec-gif89a.txt","children":"官方文档"}],"介绍 ",["$","code",null,{"children":"LZW"}],"规则，比较复杂，下次单独介绍。"]}]]}],["$","h4",null,{"className":"content-header","id":"8数据子块---data-sub-blocks","children":[["$","a",null,{"className":"break-words","href":"#8数据子块---data-sub-blocks","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"8、数据子块 - Data Sub-blocks"]}],["$","ol",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"描述"}],"： 数据子块是包含数据的单元。 它们没有标签，这些块在控制块的上下文中处理，无论数据块在格式中指定在哪里。 数据子块的第一个字节表示要跟随的数据字节数。 一个数据子块可以包含 0 到 255 个数据字节。 块的大小不考虑大小字节本身，因此，空子块是大小字段包含0x00的子块。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"所需版本"}],"：87a."]}],["$","li",null,{"children":["$","div",null,{"children":[["$","strong",null,{"children":"句法"}],"： ",["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-14.webp","alt":"gif-Page-DataSub-blocks.drawio.png","width":"581","height":"442"}]]}]}]]}],["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Block Size"}],"：",["$","code",null,{"children":"块大小"}]," - 数据子块中的字节数；大小必须在 0 和 255 字节之间，包括 0 和 255 字节。"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Data Values"}],"：",["$","code",null,{"children":"数据值"}]," - 任何 8 位值。 数据值的数量必须与块大小字段指定的数量完全一样。"]}]]}],["$","ol",null,{"start":"4","children":["$","li",null,{"children":[["$","strong",null,{"children":"代码实现"}],"："]}]}],["$","$L18",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"SubBlocks"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"private"}]," blocks",["$","span",null,{"className":"token operator","children":":"}]," blocks",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Array"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            offset",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["            length",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"private"}]," length",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"；\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"constructor"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"private"}]," stream",["$","span",null,{"className":"token operator","children":":"}]," Stream",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream ",["$","span",null,{"className":"token operator","children":"="}]," stream",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"const"}]," offset ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"getOffset"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"let"}]," blockSize ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"let"}]," length ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"const"}]," blocks",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Array"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            offset",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["            length",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"while"}],["$","span",null,{"className":"token punctuation","children":"("}],"blockSize ",["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            blocks",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"push"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," offset",["$","span",null,{"className":"token operator","children":":"}]," offset ",["$","span",null,{"className":"token operator","children":"+"}]," length",["$","span",null,{"className":"token punctuation","children":","}]," length",["$","span",null,{"className":"token operator","children":":"}]," blockSize ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            length ",["$","span",null,{"className":"token operator","children":"+="}]," blockSize ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"seek"}],["$","span",null,{"className":"token punctuation","children":"("}],"blockSize",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            blockSize ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        length ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"blocks ",["$","span",null,{"className":"token operator","children":"="}]," blocks",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"length ",["$","span",null,{"className":"token operator","children":"="}]," length",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"readSubBlocks"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"blocks",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","ol",null,{"start":"5","children":["$","li",null,{"children":[["$","strong",null,{"children":"扩展和范围"}],"：这种类型的块总是作为较大单元的一部分出现。 它没有自己的范围。"]}]}],["$","h3",null,{"className":"content-header","id":"五gif-parser关键逻辑实现","children":[["$","a",null,{"className":"break-words","href":"#五gif-parser关键逻辑实现","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"五、gif-parser关键逻辑实现"]}],["$","ol",null,{"children":[["$","li",null,{"children":["$","div",null,{"children":["关键逻辑流程图 ",["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-15.webp","alt":"gif-Page-12.drawio.png","width":"642","height":"982"}]]}]}],["$","li",null,{"children":"代码实现"}]]}],["$","$L18",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"Parser"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," parsed",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"boolean"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," stream",["$","span",null,{"className":"token operator","children":":"}]," Stream\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," header",["$","span",null,{"className":"token operator","children":":"}]," Header\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," logicalScreenDescriptor",["$","span",null,{"className":"token operator","children":":"}]," LogicalScreenDescriptor\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," globalColorTable",["$","span",null,{"className":"token operator","children":":"}]," GlobalColorTable\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," graphicsControlExtension",["$","span",null,{"className":"token operator","children":":"}]," GraphicsControlExtension\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," plainTextExtension",["$","span",null,{"className":"token operator","children":":"}]," PlainTextExtension\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," commentExtension",["$","span",null,{"className":"token operator","children":":"}]," CommentExtension\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," applicationExtension",["$","span",null,{"className":"token operator","children":":"}]," ApplicationExtension\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," unknownExtension",["$","span",null,{"className":"token operator","children":":"}]," UnknownExtension\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," imageDescriptor",["$","span",null,{"className":"token operator","children":":"}]," ImageDescriptor\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," imageData",["$","span",null,{"className":"token operator","children":":"}]," ImageData\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"constructor"}],["$","span",null,{"className":"token punctuation","children":"("}],"arrayBuffer",["$","span",null,{"className":"token operator","children":":"}]," ArrayBuffer",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token builtin","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'GifParser init'"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"parsed ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token boolean","children":"false"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"Stream"}],["$","span",null,{"className":"token punctuation","children":"("}],"arrayBuffer",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"header ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"Header"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"logicalScreenDescriptor ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"LogicalScreenDescriptor"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"globalColorTable ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"GlobalColorTable"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"graphicsControlExtension ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"GraphicsControlExtension"}],["$","span",null,{"className":"token punctuation","children":"("}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"commentExtension ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"CommentExtension"}],["$","span",null,{"className":"token punctuation","children":"("}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"plainTextExtension ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"PlainTextExtension"}],["$","span",null,{"className":"token punctuation","children":"("}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"applicationExtension ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"ApplicationExtension"}],["$","span",null,{"className":"token punctuation","children":"("}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"unknownExtension ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"UnknownExtension"}],["$","span",null,{"className":"token punctuation","children":"("}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"imageDescriptor ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"ImageDescriptor"}],["$","span",null,{"className":"token punctuation","children":"("}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"imageData ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"ImageData"}],["$","span",null,{"className":"token punctuation","children":"("}],"stream",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"private"}]," ",["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"parsed",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"return"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// 解析 文件头"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"header",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// 解析 逻辑屏幕描述符"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"logicalScreenDescriptor",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"logicalScreenDescriptor",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"hasGlobalColorTable"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"const"}]," size ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"logicalScreenDescriptor",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"getGlobalColorTableSize"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"// 解析 全局颜色表"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"globalColorTable",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," size ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// 是否还有数据"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"while"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"hasMore"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"// 导入符，解析开始表示符，“!”、“,”、“;”"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"const"}]," introducer ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"// 如果是“!”，对应的是扩展"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"String",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"fromCharCode"}],["$","span",null,{"className":"token punctuation","children":"("}],"introducer",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token string","children":"'!'"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// 扩展类型，label：0xF9、0xFE、0x01、0xFF"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"const"}]," label ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"stream",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"readUint8"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// 0xF9：解析 图形控制扩展"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"label ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token number","children":"0xf9"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"graphicsControlExtension",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," introducer",["$","span",null,{"className":"token punctuation","children":","}]," label ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// 0xFE：解析 评论扩展"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"else"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"label ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token number","children":"0xfe"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"commentExtension",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," introducer",["$","span",null,{"className":"token punctuation","children":","}]," label ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// 0x01：解析 纯文本扩展"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"else"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"label ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token number","children":"0x01"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"plainTextExtension",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," introducer",["$","span",null,{"className":"token punctuation","children":","}]," label ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// 0xFF：解析 应用扩展"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"else"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"label ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token number","children":"0xff"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"applicationExtension",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," introducer",["$","span",null,{"className":"token punctuation","children":","}]," label ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// 解析 不其它不知道扩展"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"else"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"unknownExtension",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," introducer",["$","span",null,{"className":"token punctuation","children":","}]," label ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"// 如果是“,”，对应的图片"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"else"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"String",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"fromCharCode"}],["$","span",null,{"className":"token punctuation","children":"("}],"introducer",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token string","children":"','"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// 解析 图像描述符"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"imageDescriptor",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," introducer ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"imageDescriptor",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"hasLocalColorTable"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token keyword","children":"const"}]," size ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"imageDescriptor",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"getLocalColorTableSize"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token comment","children":"// 解析 局部颜色表"}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"localColorTable",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," size ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token comment","children":"// 解析 图片数据"}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"imageData",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"parse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"// 如果是“;”，对应的结束"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"else"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"String",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"fromCharCode"}],["$","span",null,{"className":"token punctuation","children":"("}],"introducer",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token string","children":"';'"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token builtin","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'end block'"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"// 用0填充这个"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"else"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"throw"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"Error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Unknown block: 0x'"}]," ",["$","span",null,{"className":"token operator","children":"+"}]," introducer",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"toString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"16"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"parsed ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token boolean","children":"true"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":["点击前往github查看",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/wujian-xyz/gif/blob/main/packages/gif-parser/src/parser.ts","children":"Parser"}],"类实现细节。"]}]}],["$","ol",null,{"start":"3","children":[["$","li",null,{"children":["$","div",null,{"children":["解码器效果 ",["$","$L17",null,{"src":"/static/images/gif-parser/gif-parser-16.webp","alt":"gif-parser.png","width":"1374","height":"6957"}]]}]}],["$","li",null,{"children":["$","p",null,{"children":"gif-parser已发布npm上，可以安装使用"}]}]]}],["$","ul",null,{"children":["$","li",null,{"children":"安装"}]}],["$","$L18",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"npm"}]," i @n.see/gif-parser ",["$","span",null,{"className":"token parameter variable","children":"--save"}],"\n"]}]}]}],["$","ul",null,{"children":["$","li",null,{"children":"使用"}]}],["$","$L18",null,{"className":"language-js","children":["$","code",null,{"className":"code-highlight language-js","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword module","children":"import"}]," ",["$","span",null,{"className":"token imports","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," onMounted ",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," ",["$","span",null,{"className":"token keyword module","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'vue'"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword module","children":"import"}]," ",["$","span",null,{"className":"token imports","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Parser"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," ",["$","span",null,{"className":"token keyword module","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'@n.see/gif-parser'"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"onMounted"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"fetch"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'/src/assets/03.gif'"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function method property-access","children":"then"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"resp"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," resp",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function method property-access","children":"arrayBuffer"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function method property-access","children":"then"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"arrayBuffer"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator arrow","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"// 解析gif文件流"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"const"}]," parser ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"Parser"}],["$","span",null,{"className":"token punctuation","children":"("}],"arrayBuffer",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"// gif高宽"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"width",["$","span",null,{"className":"token punctuation","children":","}]," height",["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," parser",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function method property-access","children":"getSize"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"// 导出数据"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      parser",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token keyword module","children":"export"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token comment","children":"// 获取数据"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"const"}]," dataList ",["$","span",null,{"className":"token operator","children":"="}]," parser",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function method property-access","children":"getDataList"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]]}]}],["$","ol",null,{"start":"5","children":["$","li",null,{"children":"github"}]}],["$","ul",null,{"children":[["$","li",null,{"children":["demo：",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/wujian-xyz/gif","children":"gif"}]]}],["$","li",null,{"children":["解析器：",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/wujian-xyz/gif/blob/main/packages/gif-parser","children":"git-parser"}]]}],["$","li",null,{"children":["播放器：",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/wujian-xyz/gif/blob/main/packages/gif-player","children":"gif-player"}],"（原生js）"]}],["$","li",null,{"children":["播放器：",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/wujian-xyz/gif/blob/main/packages/gif-player-vue-next","children":"gif-player-vue-next"}],"（vue-next组件）"]}]]}],["$","h3",null,{"className":"content-header","id":"六参考资料","children":[["$","a",null,{"className":"break-words","href":"#六参考资料","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"六、参考资料"]}],["$","ul",null,{"children":[["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"http://www.w3.org/Graphics/GIF/spec-gif89a.txt","children":"W3C GIF89a specification"}]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"http://www.matthewflickinger.com/lab/whatsinagif","children":"What's In A GIF"}]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"http://www.devx.com/projectcool/Article/19997/0/page/7","children":"Bit depth and color depth"}]}]]}]]}],["$","div",null,{"className":"dark:text-xyz-300 flex justify-center py-4 text-sm text-gray-700 hover:text-violet-600 xl:hidden","children":[["$","span",null,{"className":"flex items-center justify-center","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":"24","height":"24","viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":"2","strokeLinecap":"round","strokeLinejoin":"round","className":"size-4","children":[["$","path",null,{"d":"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}],["$","path",null,{"d":"M9 18c-4.51 2-5-2-7-2"}]]}]}],["$","a",null,{"className":"ml-1","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/wujian-xyz/wujian-xyz.github.io/blob/main/data/blog/gif-parser.mdx","children":"在GitHub上查看"}]]}],["$","div",null,{"className":"pt-6 pb-6 text-center text-gray-700 dark:text-gray-300","id":"comment","children":["$","$L19",null,{"slug":"gif-parser"}]}]]}],["$","footer",null,{"children":[["$","div",null,{"className":"dark:divide-xyz-900 divide-y divide-violet-100 text-sm leading-5 font-medium","children":[["$","div",null,{"className":"py-4","children":[["$","h2",null,{"className":"text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400","children":"标签"}],["$","div",null,{"className":"flex flex-wrap","children":[["$","$L6","gif-parser",{"href":"/tags/gif-parser","className":"dark:text-xyz-20 mr-4 flex rounded-lg py-2 text-sm font-semibold text-gray-600 uppercase hover:text-violet-600","aria-label":"View posts tagged gif-parser","children":"gif-parser"}],["$","$L6","parser",{"href":"/tags/parser","className":"dark:text-xyz-20 mr-4 flex rounded-lg py-2 text-sm font-semibold text-gray-600 uppercase hover:text-violet-600","aria-label":"View posts tagged parser","children":"parser"}],["$","$L6","js",{"href":"/tags/js","className":"dark:text-xyz-20 mr-4 flex rounded-lg py-2 text-sm font-semibold text-gray-600 uppercase hover:text-violet-600","aria-label":"View posts tagged js","children":"js"}],["$","$L6","图片数据流",{"href":"/tags/图片数据流","className":"dark:text-xyz-20 mr-4 flex rounded-lg py-2 text-sm font-semibold text-gray-600 uppercase hover:text-violet-600","aria-label":"View posts tagged 图片数据流","children":"图片数据流"}],["$","$L6","解码gif",{"href":"/tags/解码gif","className":"dark:text-xyz-20 mr-4 flex rounded-lg py-2 text-sm font-semibold text-gray-600 uppercase hover:text-violet-600","aria-label":"View posts tagged 解码gif","children":"解码gif"}]]}]]}],["$","div",null,{"className":"flex justify-between space-y-4 space-x-4 py-4 max-sm:flex-col","children":["$undefined",["$","div",null,{"className":"flex-1","children":[["$","h2",null,{"className":"text-xs tracking-wide text-gray-500 uppercase dark:text-gray-400","children":"下一篇文章"}],["$","div",null,{"className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":["$","$L6",null,{"className":"break-words","href":"/blog/nestjs-graphql-mysql","children":"Nestjs打通mysql与GraphQL链路、graphql 分页配置"}]}]]}]]}]]}],["$","div",null,{"className":"pt-4 xl:pt-8","children":["$","$L6",null,{"className":"hover:text-primary-600 dark:hover:text-primary-400 flex items-center text-sm text-gray-500","href":"/blog","aria-label":"返回列表","children":[["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":16,"height":16,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-arrow-left","aria-hidden":"true","children":[["$","path","1l729n",{"d":"m12 19-7-7 7-7"}],["$","path","x3x0zl",{"d":"M19 12H5"}],"$undefined"]}],["$","span",null,{"children":"返回列表"}]]}]}]]}]]}]]}]}]}]]}]}]
11:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
e:null
f:null
13:[["$","title","0",{"children":"[gif-parser]带你如何用js读取gif图片数据流，解码gif | 匠心独运"}],["$","meta","1",{"name":"description","content":"大家好，最近喜欢上文件流，对它很好奇，如psdjs解析.psd文件、xgplayerjs视频解码等，原理都类似，只是这些太复杂，不好下手。最终找到我们今天的主角gif。"}],["$","meta","2",{"name":"robots","content":"index, follow"}],["$","meta","3",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","link","4",{"rel":"canonical","href":"https://wujian.xyz/blog/gif-parser"}],["$","link","5",{"rel":"alternate","type":"application/rss+xml","href":"https://wujian.xyz/feed.xml"}],["$","meta","6",{"property":"og:title","content":"[gif-parser]带你如何用js读取gif图片数据流，解码gif"}],["$","meta","7",{"property":"og:description","content":"大家好，最近喜欢上文件流，对它很好奇，如psdjs解析.psd文件、xgplayerjs视频解码等，原理都类似，只是这些太复杂，不好下手。最终找到我们今天的主角gif。"}],["$","meta","8",{"property":"og:url","content":"https://wujian.xyz/blog/gif-parser"}],["$","meta","9",{"property":"og:site_name","content":"匠心独运"}],["$","meta","10",{"property":"og:locale","content":"zh_CN"}],["$","meta","11",{"property":"og:image","content":"https://wujian.xyz/static/images/twitter-card.png"}],["$","meta","12",{"property":"og:type","content":"article"}],["$","meta","13",{"property":"article:published_time","content":"2021-10-24T00:00:00.000Z"}],["$","meta","14",{"property":"article:modified_time","content":"2021-10-24T00:00:00.000Z"}],["$","meta","15",{"property":"article:author","content":"n.see"}],["$","meta","16",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","17",{"name":"twitter:title","content":"[gif-parser]带你如何用js读取gif图片数据流，解码gif"}],["$","meta","18",{"name":"twitter:description","content":"大家好，最近喜欢上文件流，对它很好奇，如psdjs解析.psd文件、xgplayerjs视频解码等，原理都类似，只是这些太复杂，不好下手。最终找到我们今天的主角gif。"}],["$","meta","19",{"name":"twitter:image","content":"https://wujian.xyz/static/images/twitter-card.png"}]]
